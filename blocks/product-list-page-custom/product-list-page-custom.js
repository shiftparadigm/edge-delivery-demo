(function(){"use strict";try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode('main .section.product-list-page-custom-container>.default-content-wrapper h1:first-child{display:none}.product-list-page-custom{display:flex!important;gap:2rem}.product-list-page-custom .facets{display:none;position:fixed;inset:var(--nav-height) 0 48px 0;z-index:2;overflow:auto;background:var(--background-color);box-sizing:content-box}.product-list-page-custom .facets.active{display:block}.product-list-page-custom .facets h2{display:none}.product-list-page-custom .facets .close,.product-list-page-custom .products .title .sort>.overlay .close{display:block;background:url(../../icons/x-lg.svg) center/55%;background-repeat:no-repeat;font-size:0;width:4.4rem;height:4.4rem;padding:0;border-radius:0;margin:5px 5px 5px auto;border:0}.product-list-page-custom .products .title .sort>.overlay{display:none;position:fixed;inset:var(--nav-height) 0 48px 0;z-index:2;overflow:auto;background:var(--background-color)}.product-list-page-custom .products .title .sort>.overlay.active{display:block}.product-list-page-custom .products .title .sort .overlay ul{padding:0 25px;margin:0;list-style:none}.product-list-page-custom .products .title .sort .overlay ul>li{padding:5px 0}.product-list-page-custom .facets .facet-list .facet{border-bottom:var(--shape-border-width-1) solid var(--color-neutral-900);padding:20px}.product-list-page-custom .facets .facet-list .facet:first-child{border-top:var(--shape-border-width-1) solid var(--color-neutral-900)}.product-list-page-custom .facets .facet-list .facet>label{display:flex;justify-content:space-between;align-items:center;cursor:pointer}.product-list-page-custom .facets .facet-list .facet>label:after{display:inline-block;content:"";width:15px;height:15px;background:url(../../icons/rounded-triangle.svg) no-repeat center/contain;transition:all .2s ease}.product-list-page-custom .facets .facet-list .facet .facet-content{transition:all .2s ease;overflow:hidden;padding-top:6px}.product-list-page-custom .facets .facet-list .facet .facet-content ol{list-style-type:none;margin:0;padding:16px 0 0}.product-list-page-custom .facets .facet-list .facet>input{display:none}.product-list-page-custom .facets .facet-list .facet>input~.facet-content{max-height:0}.product-list-page-custom .facets .facet-list .facet>input:checked~.facet-content{max-height:1000px}.product-list-page-custom .facets .facet-list .facet>input:checked~label:after{transform:rotate(180deg)}.product-list-page-custom .facets .facet-list .facet.radio .facet-content ol li,.product-list-page-custom .facets .facet-list .facet.checkbox .facet-content ol li{margin-bottom:6px}.product-list-page-custom .facets .facet-list .facet.radio .facet-content ol input[type=radio]{vertical-align:middle;position:relative;bottom:2px;margin:3px}.product-list-page-custom .facets .facet-list .facet.checkbox .facet-content ol input[type=checkbox]{vertical-align:middle;margin:3px}.product-list-page-custom .facets .facet-list .facet.radio .facet-content ol label,.product-list-page-custom .facets .facet-list .facet.checkbox .facet-content ol label{text-transform:none;letter-spacing:normal}.product-list-page-custom .facets .facet-list .facet.radio .facet-content ol label .count,.product-list-page-custom .facets .facet-list .facet.checkbox .facet-content ol label .count{text-transform:none}.product-list-page-custom .facets .facet-list .facet.radio .facet-content ol label .count:before,.product-list-page-custom .facets .facet-list .facet.checkbox .facet-content ol label .count:before{content:"("}.product-list-page-custom .facets .facet-list .facet.radio .facet-content ol label .count:after,.product-list-page-custom .facets .facet-list .facet.checkbox .facet-content ol label .count:after{content:")"}.product-list-page-custom .facets .facet-list .facet.swatch.facet-size .facet-content ol{display:flex;flex-wrap:wrap;gap:4px}.product-list-page-custom .facets .facet-list .facet.swatch.facet-size .facet-content ol li button{border:1px solid var(--color-brand-700);background:var(--color-neutral-50);color:var(--color-brand-700);border-radius:3px;min-width:60px;min-height:38px;padding:0 0 3px;margin:0}.product-list-page-custom .facets .facet-list .facet.swatch.facet-size .facet-content ol li button.active{background:var(--color-brand-700);color:var(--color-neutral-50)}.product-list-page-custom .facets .facet-list .facet.swatch.facet-color .facet-content ol{display:flex;flex-wrap:wrap;gap:6px}.product-list-page-custom .facets .facet-list .facet.swatch.facet-color .facet-content ol li button{color:transparent;border:1px solid var(--color-brand-700);background-size:cover;width:34px;height:34px;border-radius:100%;padding:0;margin:0}.product-list-page-custom .facets .facet-list .facet.swatch.facet-color .facet-content ol li button.active{box-shadow:0 0 0 2px var(--color-neutral-50) inset;border-color:var(--color-neutral-600)}.product-list-page-custom .facets .facet-list .facet.swatch.facet-color .facet-content ol li button:hover{box-shadow:inset 0 0 0 18px #ffffff4d}.product-list-page-custom .facets .facet-list .facet.swatch.facet-color .facet-content ol li button.active:hover{box-shadow:inset 0 0 0 18px #ffffff4d,0 0 0 2px var(--color-neutral-50) inset}.product-list-page-custom .facets .facet-list .facet .price-facet{display:flex;flex-wrap:wrap;justify-content:space-between}.product-list-page-custom .facets .facet-list .facet .price-facet .price-slider{width:100%;display:grid;height:15px;margin-bottom:10px;flex-basis:100%}.product-list-page-custom .facets .facet-list .facet .price-facet .price-slider input[type=range]{grid-area:1 / 1 / 1 / 1;-webkit-appearance:none;-moz-appearance:none;appearance:none;width:100%;background:transparent;position:relative;margin:0;outline:none;pointer-events:none}.product-list-page-custom .facets .facet-list .facet .price-facet .price-slider input[type=range]::-moz-range-thumb{height:15px;width:15px;border-radius:50%;background-color:var(--color-brand-500);position:relative;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;pointer-events:all;border:0;outline:none}.product-list-page-custom .facets .facet-list .facet .price-facet .price-slider input[type=range]::-webkit-slider-thumb{height:15px;width:15px;border-radius:50%;background-color:var(--color-brand-500);position:relative;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;pointer-events:all;border:0;outline:none;z-index:1;margin-top:-5px}.product-list-page-custom .facets .facet-list .facet .price-facet .price-slider input[type=range]::-webkit-slider-runnable-track{width:100%;height:5px;background:var(--color-neutral-500);border-radius:3px;border:none}.product-list-page-custom .facets .facet-list .facet .price-facet .price-slider input[type=range]:first-of-type::-moz-range-track{width:100%;height:5px;background:var(--color-neutral-500);border-radius:3px;border:none}.product-list-page-custom .products{flex:75;display:flex;gap:25px;flex-direction:column}.product-list-page-custom .products .title{align-items:last baseline}@media (width >= 900px){.product-list-page-custom .products .title{display:flex;align-items:last baseline}}.product-list-page-custom .products .title h1{margin:0;padding:0}.product-list-page-custom .products .title h1~span{display:none;margin-inline:1rem 48px;white-space:nowrap}.product-list-page-custom .products .title .sort{display:block;margin-left:auto;min-width:20rem}.product-list-page-custom .products .title .sort>*{display:none}.product-list-page-custom .products .title .sort>button{width:100%;border:var(--shape-border-width-3) solid currentcolor;background:var(--color-neutral-50);color:var(--color-brand-700);padding:16px;margin:0}.product-list-page-custom .products .mobile-menu{display:flex;justify-content:space-between;gap:15px}.product-list-page-custom .products .mobile-menu>button{width:max-content;border:var(--shape-border-width-3) solid currentcolor;border-radius:var(--shape-border-radius-2);background:var(--color-neutral-50);color:var(--color-brand-700);line-height:1;padding:.5rem 24px;margin:0;min-width:10rem}.product-list-page-custom .products .list>.empty{text-align:center;padding:25px 0}.product-list-page-custom .products .list>ol{list-style-type:none;display:grid;margin:0;padding:0;gap:20px;grid-template-columns:repeat(2,1fr);grid-auto-rows:1fr}.product-list-page-custom .products .list>ol>li{display:flex;flex-direction:column;overflow:hidden}.product-list-page-custom .products .list>ol>li .picture{display:block;width:100%;aspect-ratio:1 / 1.2;position:relative;overflow:hidden}.product-list-page-custom .products .list>ol>li .picture a{display:grid;text-decoration:none}.product-list-page-custom .products .list>ol>li .picture a:hover{text-decoration:none}.product-list-page-custom .products .list>ol>li .picture picture{display:block;width:100%;height:100%;grid-area:1 / 1 / 1 / 1}.product-list-page-custom .products .list>ol>li .picture img{display:block;aspect-ratio:1 / 1.2;width:100%;object-fit:cover}.product-list-page-custom .products .list>ol>li .disruptor{height:0}.product-list-page-custom .products .list>ol>li .disruptor img{display:block;width:100%}.product-list-page-custom .products .list>ol>li .name{line-height:1}.product-list-page-custom .products .list>ol>li .name a{font:var(--type-headline-2-strong-font);letter-spacing:var(--type-headline-2-strong-letter-spacing);display:inline-block;line-height:1.3;text-decoration:none;text-overflow:ellipsis;overflow:hidden;height:6.1rem}.product-list-page-custom .products .list>ol>li .name a:hover{color:var(--color-brand-700)}.product-list-page-custom .products .list>ol>li .price{font:var(--type-headline-2-strong-font);letter-spacing:var(--type-headline-2-strong-letter-spacing);height:2.8rem;display:flex;align-items:baseline;gap:.3em}.product-list-page-custom .products .list>ol>li .price .price-regular{font:var(--type-headline-2-default-font);letter-spacing:var(--type-headline-2-default-letter-spacing);text-decoration:line-through;color:var(--color-neutral-600)}.product-list-page-custom .products .list>ol>li .price .price-range{display:flex;align-items:baseline;flex-wrap:wrap}.product-list-page-custom .products .list>ol>li .price .price-range .price-from:first-child:after{content:"-";padding:0 8px}.product-list-page-custom .products .list>ol>li .price .price-range .price-regular{margin-left:6.4px}@media (width >= 600px){.product-list-page-custom .products .list>ol>li .price .price-range .price-regular{margin-left:9.6rem}}.product-list-page-custom .products>div:last-child{margin-top:auto}.product-list-page-custom .products .pagination{display:flex;height:3.6rem;justify-content:space-between;padding-bottom:3rem}@media (width >= 1024px){.product-list-page-custom .products .pagination{padding-top:3rem}}.product-list-page-custom .products .pagination>div:nth-child(2){display:none}.product-list-page-custom .products .pagination select#select-page{padding:0 2.5rem 2px 1rem}.product-list-page-custom .products .pagination select#select-pagesize{width:9rem;padding:0 0 0 .2rem}.product-list-page-custom .products .pagination button{background:transparent;border:0;padding:0;margin:0 0 0 32px;color:var(--color-brand-700);border-radius:0}.product-list-page-custom .products .pagination button.previous:before,.product-list-page-custom .products .pagination button.next:after{display:inline-block;content:"";width:12px;height:12px;background:url(../../icons/rounded-triangle.svg) no-repeat center/contain;transform:rotate(90deg);margin-right:8px}.product-list-page-custom .products .pagination button.next:after{background:url(../../icons/rounded-triangle.svg) no-repeat center/contain;transform:rotate(270deg);margin-right:0;margin-left:8px}@media (width >= 900px){.product-list-page-custom{display:flex}main .section>div.product-list-page-custom-wrapper{max-width:1920px}.product-list-page-custom .facets{display:block;flex:25;max-width:430px;background:var(--color-neutral-500);padding:20px 30px;position:unset;z-index:unset;overflow:unset}.product-list-page-custom .facets .close{display:none}.product-list-page-custom .facets h2{display:block;margin:0;padding:20px 5px}.product-list-page-custom .facets .facet-list .facet{padding:20px 0}.product-list-page-custom .products{gap:10px}.product-list-page-custom .products .mobile-menu{display:none}.product-list-page-custom .products .list>ol{grid-template-columns:repeat(4,1fr)}.product-list-page-custom .products .list>ol>li .picture:hover button{display:block}.product-list-page-custom .products .pagination>div:nth-child(2){display:block}.product-list-page-custom .products .title h1~span{display:inline}.product-list-page-custom .products .title .sort{position:relative}.product-list-page-custom .products .title .sort>*{display:unset}.product-list-page-custom .products .title .sort>button:after{display:inline-block;content:"";width:12px;height:12px;margin-left:10px;background:url(../../icons/rounded-triangle.svg) no-repeat center/contain;transition:all .2s ease}.product-list-page-custom .products .title .sort:not([disabled]):hover>button:after{transform:rotate(180deg)}.product-list-page-custom .products .title .sort:not([disabled]):hover>.overlay{display:block}.product-list-page-custom .products .title .sort>.overlay{display:none;position:absolute;width:100%;z-index:2;box-shadow:0 36px 51px #0000004d;border-radius:6px;left:unset;top:unset;bottom:unset;overflow:unset}.product-list-page-custom .products .title .sort .overlay .close{display:none}.product-list-page-custom .products .title .sort>.overlay.active{display:none}.product-list-page-custom .products .title .sort .overlay ul{padding:0;margin:0;list-style:none}.product-list-page-custom .products .title .sort .overlay ul>li{padding:10px 20px;text-align:right}}.product-list-page-custom .shimmer{background:var(--color-neutral-500);border-radius:4px}.product-list-page-custom .shimmer-text{border-radius:8px;min-height:1.5rem;margin-bottom:4px}')),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();
var F = Object.defineProperty;
var k = (a, s, t) => s in a ? F(a, s, { enumerable: !0, configurable: !0, writable: !0, value: t }) : a[s] = t;
var $ = (a, s, t) => (k(a, typeof s != "symbol" ? s + "" : s, t), t);
import { _ as I, b as P, k as U, m as S, B as q } from "../../preact.module-DQ8xhgSd.js";
import z from "../../scripts/htm.js";
import { renderPrice as T, priceFieldsFragment as E, performCatalogServiceQuery as A } from "../../scripts/commerce.js";
import { r as O } from "../../readBlockConfig-BocDcTz8.js";
import { s as L } from "../../sampleRUM-BOaDpSnv.js";
const m = z.bind(I);
class _ extends P {
  constructor(s) {
    super(), this.formatter = new Intl.NumberFormat("en-US", {
      style: "currency",
      currency: "USD"
    }), this.baseProduct = s.product;
  }
  renderImage(s = "lazy") {
    const { product: t } = this.props;
    let e;
    if (t.images && t.images.length > 0 && (e = t.images[0].url), !e)
      return m`<div class="no-image"></div>`;
    const i = new URL(e);
    return i.protocol = "https:", i.search = "", m`<picture>
			<source
				type="image/webp"
				srcset="
					${i}?width=163&bg-color=255,255,255&format=webply&optimize=medium 1x,
					${i}?width=326&bg-color=255,255,255&format=webply&optimize=medium 2x,
					${i}?width=489&bg-color=255,255,255&format=webply&optimize=medium 3x
				"
				media="(max-width: 900px)"
			/>
			<source
				type="image/webp"
				srcset="
					${i}?width=330&bg-color=255,255,255&format=webply&optimize=medium 1x,
					${i}?width=660&bg-color=255,255,255&format=webply&optimize=medium 2x,
					${i}?width=990&bg-color=255,255,255&format=webply&optimize=medium 3x
				"
			/>
			<img
				class="product-image-photo"
				src="${i}?width=330&quality=100&bg-color=255,255,255"
				max-width="330"
				max-height="396"
				alt=${t.name}
				loading=${s}
			/>
		</picture>`;
  }
  onProductClick(s) {
    window.adobeDataLayer.push((t) => {
      t.push({
        event: "search-product-click",
        eventInfo: {
          ...t.getState(),
          searchUnitId: "searchUnitId",
          sku: s.sku
        }
      });
    });
  }
  render({ product: s, loading: t, index: e }) {
    if (t)
      return m` <li>
				<div class="picture shimmer"></div>
				<div class="variants"></div>
				<div class="name">
					<div class="shimmer shimmer-text"></div>
					<div class="shimmer shimmer-text" style="max-width: 70%"></div>
				</div>
				<div class="price">
					<div class="shimmer shimmer-text" style="max-width: 30%"></div>
				</div>
				<div class="rating"></div>
			</li>`;
    const r = window.matchMedia(
      "only screen and (max-width: 900px)"
    ).matches ? 2 : 4;
    return m` <li index=${e}>
			<div class="picture">
				<a
					onClick=${() => this.onProductClick(s)}
					href="/products/${s.urlKey}/${s.sku.toLowerCase()}"
				>
					${this.renderImage(e < r ? "eager" : "lazy")}
				</a>
			</div>
			<div class="name">
				<a
					onClick=${() => this.onProductClick(s)}
					href="/products/${s.urlKey}/${s.sku.toLowerCase()}"
					dangerouslySetInnerHTML=${{ __html: s.name }}
				/>
			</div>
			<div class="price">
				${T(s, this.formatter.format, m, U)}
			</div>
		</li>`;
  }
}
const B = ({ products: a, loading: s, currentPageSize: t }) => {
  if (s)
    return m`<div class="list">
			<ol>
				${Array(t).fill().map(() => m`<${_} loading=${!0} />`)}
			</ol>
		</div>`;
  if (a.items.length === 0)
    return m`<div class="list">
			<div class="empty">
				We're sorry, we couldn't find anything that matches your query.
			</div>
		</div>`;
  const e = a.items.map(
    (i, r) => m`<${_}
				key=${i.sku}
				product=${i}
				index=${r}
			/>`
  );
  return m`<div class="list">
		<ol>
			${e}
		</ol>
	</div>`;
}, f = z.bind(I), b = {
  silhouette: {
    type: "checkbox"
  },
  size: {
    type: "swatch",
    style: "facet-size"
  },
  bandsize: {
    type: "swatch",
    style: "facet-size"
  },
  cupsize: {
    type: "swatch",
    style: "facet-size"
  },
  color_family: {
    type: "swatch",
    style: "facet-color"
  },
  price: {
    type: "price"
  }
};
class j extends P {
  constructor(t) {
    super();
    $(this, "onChange", (t = !0) => {
      const e = this.minRef.current.value, i = this.maxRef.current.value;
      let r = Math.min(e, i), n = Math.max(e, i);
      r === n && (r > this.state.min ? r -= 1 : n < this.state.max && (n += 1)), this.setState({ currentMin: r, currentMax: n }), t && this.props.onSelectionChange(this.props.attribute, [
        r,
        n
      ]);
    });
    this.formatter = new Intl.NumberFormat("en-US", {
      style: "currency",
      currency: "USD"
    });
    const { buckets: e, selection: i } = t, r = Math.min(...e.map((l) => l.from)), n = Math.max(...e.map((l) => l.to));
    let c = r, u = n;
    i.length === 2 && i[0] >= r && i[1] <= n && ([c, u] = i), this.state = {
      min: r,
      max: n,
      currentMin: c,
      currentMax: u
    }, this.minRef = S(), this.maxRef = S();
  }
  render() {
    const { min: t, max: e, currentMin: i, currentMax: r } = this.state, { selection: n } = this.props;
    let c = t, u = e;
    return n.length === 2 && n[0] >= t && n[1] <= e && ([c, u] = n), f`<div class="price-facet">
			<div class="price-slider">
				<input
					type="range"
					ref=${this.minRef}
					id="price-slider-min"
					defaultValue=${c}
					min=${t}
					max=${e}
					step="1"
					onchange=${this.onChange}
					oninput=${() => this.onChange(!1)}
				/>
				<input
					type="range"
					ref=${this.maxRef}
					id="price-slider-max"
					defaultValue=${u}
					min=${t}
					max=${e}
					step="1"
					onchange=${this.onChange}
					oninput=${() => this.onChange(!1)}
				/>
			</div>
			<label for="price-slider-min">${this.formatter.format(i)}</label>
			<label for="price-slider-max">${this.formatter.format(r)}</label>
		</div>`;
  }
}
function K({
  title: a,
  attribute: s,
  buckets: t,
  selection: e,
  onSelectionChange: i
}) {
  let r = "radio", n = "";
  const c = t;
  b[s] && (r = b[s].type, n = b[s].style);
  const u = () => {
    const l = (o) => {
      const { value: g } = o.target;
      if (s === "price") {
        const [p, v] = g.split(",").map((y) => parseInt(y, 10) || 0);
        e[0] === p && e[1] === v ? i(s, []) : i(s, [p, v]);
      } else
        e.includes(g) ? i(s, []) : i(s, [g]);
    }, d = (o) => {
      const { value: g } = o.target;
      e.includes(g) ? i(
        s,
        e.filter((p) => p !== g)
      ) : i(s, [...e, g]);
    };
    return r === "swatch" ? c.map(
      (o) => f`
					<li>
						<button
							title=${o.title}
							value=${o.id}
							class="${e.includes(o.id) ? "active" : ""}"
							onClick=${d}
						>
							${o.title}
						</button>
					</li>
				`
    ) : r === "checkbox" ? c.map(
      (o) => f`<li>
						<input
							type="checkbox"
							name="facet-${s}"
							id="facet-${o.id}"
							value=${o.id}
							checked=${e.includes(o.id)}
							onClick=${d}
						/>
						<label for="facet-${o.id}">
							${o.title} <span class="count">${o.count}</span>
						</label>
					</li>`
    ) : r === "radio" ? c.map(
      (o) => f`<li>
						<input
							type="radio"
							name="facet-${s}"
							id="facet-${o.id}"
							value=${o.id}
							checked=${e.includes(o.id)}
							onClick=${l}
						/>
						<label for="facet-${o.id}">
							${o.title} <span class="count">${o.count}</span>
						</label>
					</li>`
    ) : r === "price" ? f`<${j}
				attribute=${s}
				buckets=${c}
				selection=${e}
				onSelectionChange=${i}
			/>` : null;
  };
  return f`<div class="facet ${r} ${n || ""}">
		<input
			type="checkbox"
			id="facet-toggle-${s}"
			checked=${e.length > 0}
		/>
		<label for="facet-toggle-${s}">${a}</label>
		<div class="facet-content">
			<ol>
				${u()}
			</ol>
		</div>
	</div>`;
}
class V extends P {
  constructor() {
    super(...arguments);
    $(this, "onSelectionChange", (t, e) => {
      const i = { ...this.props.filters };
      i[t] = e, this.props.onFilterChange(i);
    });
  }
  // eslint-disable-next-line class-methods-use-this
  render({ facetMenuRef: t, facets: e, filters: i, loading: r }) {
    return r ? f`<div class="facets shimmer"></div>` : f` <div
			class="facets ${r ? "shimmer" : ""}"
			ref=${t}
		>
			<h2>Filters</h2>
			<button
				class="close"
				onClick=${() => t.current.classList.toggle("active")}
			>
				Close
			</button>
			<div class="facet-list">
				${e.filter((n) => n.buckets.length > 0).map((n) => {
      const c = i[n.attribute] || [];
      return f`<${K}
							...${n}
							selection=${c}
							onSelectionChange=${this.onSelectionChange}
						/>`;
    })}
			</div>
		</div>`;
  }
}
const h = z.bind(I), C = [
  "page",
  "pageSize",
  "sort",
  "sortDirection",
  "q",
  "price",
  "size",
  "color_family"
], Q = (a = !1) => `query ProductSearch(
  $currentPage: Int = 1
  $pageSize: Int = 20
  $phrase: String = ""
  $sort: [ProductSearchSortInput!] = []
  $filter: [SearchClauseInput!] = []
  ${a ? "$categoryId: String!" : ""}
) {
  ${a ? `categories(ids: [$categoryId]) {
      name
      urlKey
      urlPath
  }` : ""}
  productSearch(
      current_page: $currentPage
      page_size: $pageSize
      phrase: $phrase
      sort: $sort
      filter: $filter
  ) {
      facets {
          title
          type
          attribute
          buckets {
              title
              __typename
              ... on RangeBucket {
                  count
                  from
                  to
              }
              ... on ScalarBucket {
                  count
                  id
              }
              ... on StatsBucket {
                  max
                  min
              }
          }
      }
      items {
          product {
            id
          }
          productView {
              name
              sku
              urlKey
              images(roles: "thumbnail") {
                url
              }
              __typename
              ... on SimpleProductView {
                  price {
                      ...priceFields
                  }
              }
              ... on ComplexProductView {
                  priceRange {
                      minimum {
                          ...priceFields
                      }
                      maximum {
                          ...priceFields
                      }
                  }
              }
          }
      }
      page_info {
          current_page
          total_pages
          page_size
      }
      total_count
  }
}
${E}`;
async function N(a) {
  var s;
  try {
    const t = {
      pageSize: a.currentPageSize,
      currentPage: a.currentPage,
      sort: [
        {
          attribute: a.sort,
          direction: a.sortDirection === "desc" ? "DESC" : "ASC"
        }
      ]
    };
    t.phrase = a.type === "search" ? a.searchTerm : "", Object.keys(a.filters).length > 0 && (t.filter = [], Object.keys(a.filters).forEach((i) => {
      if (i === "price") {
        const [r, n] = a.filters[i];
        r && n && t.filter.push({ attribute: i, range: { from: r, to: n } });
      } else
        a.filters[i].length > 1 ? t.filter.push({ attribute: i, in: a.filters[i] }) : a.filters[i].length === 1 && t.filter.push({ attribute: i, eq: a.filters[i][0] });
    })), a.type === "category" && a.category.id && (t.categoryId = a.category.id, t.filter = t.filter || [], t.filter.push({
      attribute: "categoryIds",
      eq: a.category.id
    })), window.adobeDataLayer.push((i) => {
      const r = crypto.randomUUID();
      window.sessionStorage.setItem("searchRequestId", r);
      const n = i.getState("searchInputContext") ?? {
        units: []
      }, c = "livesearch-plp", u = {
        searchUnitId: c,
        searchRequestId: r,
        queryTypes: ["products", "suggestions"],
        ...t
      }, l = n.units.findIndex(
        (d) => d.searchUnitId === c
      );
      l < 0 ? n.units.push(u) : n.units[l] = u, i.push({ searchInputContext: n }), i.push({
        event: "search-request-sent",
        eventInfo: { ...i.getState(), searchUnitId: c }
      });
    });
    const e = await A(
      Q(a.type === "category"),
      t
    );
    return {
      pages: Math.max(e.productSearch.page_info.total_pages, 1),
      products: {
        items: e.productSearch.items.map((i) => ({ ...i.productView, ...i.product })).filter((i) => i !== null),
        total: e.productSearch.total_count
      },
      category: { ...a.category, ...((s = e.categories) == null ? void 0 : s[0]) ?? {} },
      facets: e.productSearch.facets.filter(
        (i) => i.attribute !== "categories"
      )
    };
  } catch (t) {
    return console.error("Error loading products", t), {
      pages: 1,
      products: {
        items: [],
        total: 0
      },
      facets: []
    };
  }
}
function H() {
  const a = new URLSearchParams(window.location.search), s = {
    filters: {
      inStock: ["true"]
    }
  };
  return a.forEach((t, e) => {
    C.includes(e) && (e === "page" ? s.currentPage = parseInt(t, 10) || 1 : e === "pageSize" ? s.currentPageSize = parseInt(t, 10) || 10 : e === "sort" ? s.sort = t : e === "sortDirection" ? s.sortDirection = t === "desc" ? "desc" : "asc" : e === "q" ? s.searchTerm = t : e === "price" ? s.filters[e] = t.split(",").map((i) => parseInt(i, 10) || 0) : s.filters[e] = t.split(","));
  }), s;
}
function W(a) {
  return a.loading ? h`<div class="pagination shimmer"></div>` : h`<div class="pagination">
		<div>
			<label for="select-pagesize">Show:</label>
			<select
				id="select-pagesize"
				name="pageSize"
				value=${a.currentPageSize}
				onChange=${(s) => {
    var t;
    return (t = a.onPageSizeChange) == null ? void 0 : t.call(a, parseInt(s.target.value, 10));
  }}
			>
				${a.pageSizeOptions.map(
    (s) => h`<option value=${s}>${s} Items</option>`
  )}
			</select>
		</div>
		<div>
			<label for="select-page">Page:</label>
			<select
				id="select-page"
				name="page"
				value=${a.currentPage}
				onChange=${(s) => {
    var t;
    return (t = a.onPageChange) == null ? void 0 : t.call(a, parseInt(s.target.value, 10));
  }}
			>
				${Array(a.pages).fill(0).map((s, t) => h`<option value=${t + 1}>${t + 1}</option>`)}
			</select>
			<span>of ${a.pages}</span>
		</div>
		<div>
			${a.currentPage > 1 ? h`<button
						class="previous"
						onClick=${() => {
    var s;
    return (s = a.onPageChange) == null ? void 0 : s.call(a, a.currentPage - 1);
  }}
					>
						Previous
					</button>` : ""}
			${a.currentPage < a.pages ? h`<button
						class="next"
						onClick=${() => {
    var s;
    return (s = a.onPageChange) == null ? void 0 : s.call(a, a.currentPage + 1);
  }}
					>
						Next
					</button>` : ""}
		</div>
	</div>`;
}
function G(a) {
  const { type: s, disabled: t, sortMenuRef: e, onSort: i } = a, r = [
    { label: "Price: High to Low", value: "price-desc" },
    { label: "Price: Low to High", value: "price-asc" },
    { label: "Product Name", value: "name-asc" },
    {
      label: "Relevance",
      value: s === "category" ? "position-asc" : "relevance-desc"
    }
  ], n = r.find(
    (c) => c.value === `${a.currentSort}-${a.sortDirection}`
  ) || r[3];
  return h`<div class="sort" disabled=${t}>
		<button disabled=${t}>Sort By: ${n.label}</button>
		<div class="overlay" ref=${e}>
			<button
				class="close"
				onClick=${() => e.current.classList.toggle("active")}
			>
				Close
			</button>
			<ul>
				${r.map(
    (c) => h`<li>
							<a
								href="#"
								class="${n.value === c.value ? "active" : ""}"
								onClick=${(u) => {
      e.current.classList.toggle("active");
      const [l, d = "asc"] = c.value.split("-");
      i == null || i(l, d), u.preventDefault();
    }}
								>${c.label}</a
							>
						</li>`
  )}
			</ul>
		</div>
	</div>`;
}
const w = class w extends P {
  constructor(t) {
    var d;
    const { type: e = "category", category: i } = t;
    super();
    $(this, "loadState", async (t) => {
      await this.setStatePromise({ ...t, loading: !1 }), this.state && this.state.products && (this.filterChange = !1, this.paginationClick = !1), this.props.resolve(), this.props.type === "search" && this.state.loading === !1 && this.state.products.total === 0 && L("nullsearch", {
        source: ".search-input",
        target: this.state.searchTerm
      }), this.state.loading === !1 && window.adobeDataLayer.push((e) => {
        const i = e.getState("searchResultsContext") ?? {
          units: []
        }, r = window.sessionStorage.getItem("searchRequestId"), n = "livesearch-plp", c = {
          searchUnitId: n,
          searchRequestId: r,
          products: this.state.products.items.map((l, d) => {
            var o, g, p, v, y, R, M, D;
            return {
              name: l.name,
              sku: l.sku,
              url: new URL(
                `/products/${l.url_key}/${l.sku.toLowerCase()}`,
                window.location
              ).toString(),
              imageUrl: (o = l.images) != null && o.length ? l.images[0].url : "",
              price: ((v = (p = (g = l.price) == null ? void 0 : g.final) == null ? void 0 : p.amount) == null ? void 0 : v.value) ?? ((D = (M = (R = (y = l.priceRange) == null ? void 0 : y.minimum) == null ? void 0 : R.final) == null ? void 0 : M.amount) == null ? void 0 : D.value),
              rank: d
            };
          }),
          categories: [],
          suggestions: [],
          page: this.state.currentPage,
          perPage: this.state.currentPageSize,
          facets: this.state.facets
        }, u = i.units.findIndex(
          (l) => l.searchUnitId === n
        );
        u < 0 ? i.units.push(c) : i.units[u] = c, e.push({ searchResultsContext: i }), e.push({
          event: "search-response-received",
          eventInfo: { ...e.getState(), searchUnitId: n }
        }), this.props.type === "search" ? e.push({
          event: "search-results-view",
          eventInfo: { ...e.getState(), searchUnitId: n }
        }) : (e.push({
          categoryContext: {
            name: this.state.category.name,
            urlKey: this.state.category.urlKey,
            urlPath: this.state.category.urlPath
          }
        }), e.push({
          event: "category-results-view",
          eventInfo: { ...e.getState(), searchUnitId: n }
        })), e.push({ event: "page-view", eventInfo: { ...e.getState() } });
      });
    });
    $(this, "loadProducts", async () => {
      this.setState({ loading: !0 });
      const t = await N(this.state);
      await this.loadState(t);
    });
    this.facetMenuRef = S(), this.sortMenuRef = S();
    const r = H();
    let n = "Search Results", c = "relevance", u = "desc";
    const l = 12;
    e === "category" && (n = (d = document.querySelector(
      ".default-content-wrapper > h1"
    )) == null ? void 0 : d.innerText, c = "position", u = "asc"), e === "search" && L("search", {
      source: ".search-input",
      target: r.searchTerm
    }), this.state = {
      loading: !0,
      pages: 1,
      currentPage: 1,
      basePageSize: l,
      currentPageSize: l,
      type: e,
      category: {
        name: n,
        id: i || null
      },
      sort: c,
      sortDirection: u,
      products: {
        items: [],
        total: 0
      },
      filters: {},
      facets: [],
      ...r
    }, this.filterChange = !1, this.paginationClick = !1;
  }
  setStatePromise(t) {
    return new Promise((e) => {
      this.setState(t, e);
    });
  }
  async componentDidMount() {
    if (window.loadCategoryPromise) {
      const t = await window.loadCategoryPromise;
      await this.loadState(t);
    } else
      await this.loadProducts();
  }
  componentDidUpdate(t, e) {
    w.updateQueryParams({
      page: this.state.currentPage,
      basePageSize: this.state.basePageSize,
      pageSize: this.state.currentPageSize,
      sort: this.state.sort,
      sortDirection: this.state.sortDirection,
      q: this.state.searchTerm,
      ...this.state.filters
    });
    const i = Object.keys(
      Object.keys(e).reduce((n, c) => (e[c] !== this.state[c] && (n[c] = this.state[c]), n), {})
    );
    [
      "filters",
      "sort",
      "sortDirection",
      "searchTerm",
      "currentPageSize",
      "currentPage"
    ].some((n) => i.includes(n)) && this.loadProducts();
  }
  onPageChange(t) {
    this.setState({ currentPage: t }), this.paginationClick = !0, window.scrollTo({ top: 0, behavior: "smooth" });
  }
  handleFilterChange(t) {
    this.setState({ filters: t, currentPage: 1 }), this.filterChange = !0;
  }
  render(t, e) {
    const { type: i = "category" } = t;
    return h`<${U}>
    <${V} 
      facets=${e.facets}
      filters=${e.filters}
      facetMenuRef=${this.facetMenuRef}
      onFilterChange=${this.handleFilterChange.bind(this)}
      loading=${e.loading} />
    <div class="products">
      <div class="title">
        <h1>${e.category.name}</h1>
        ${!e.loading && h`<span>(${e.products.total} ${e.products.total === 1 ? "Product" : "Products"})</span>`}
        <${G}
          disabled=${e.loading}
          currentSort=${e.sort}
          sortDirection=${e.sortDirection}
          type=${i}
          onSort=${(r, n) => this.setState({ sort: r, sortDirection: n })}
          sortMenuRef=${this.sortMenuRef} />
      </div>
      <div class="mobile-menu">
        <button disabled=${e.loading} id="toggle-filters" onClick=${() => this.facetMenuRef.current.classList.toggle("active")}>Filters</button>
        <button disabled=${e.loading} id="toggle-sortby" onClick=${() => this.sortMenuRef.current.classList.toggle("active")}>Sort By</button>
      </div>
      <${B} products=${e.products} disruptors=${e.disruptors} loading=${e.loading} currentPageSize=${e.currentPageSize} />
      <${W}
        pages=${e.pages}
        currentPage=${e.currentPage}
        pageSizeOptions=${[e.basePageSize, 24, 36]}
        currentPageSize=${e.currentPageSize}
        loading=${e.loading}
        onPageChange=${this.onPageChange.bind(this)}
        onPageSizeChange=${(r) => this.setState({ currentPageSize: r, currentPage: 1 })} />
    </div>
  </>`;
  }
};
$(w, "updateQueryParams", (t) => {
  const e = new URLSearchParams();
  Object.keys(t).forEach((r) => {
    C.includes(r) && (Array.isArray(t[r]) && t[r].length > 0 ? e.set(r, t[r].join(",")) : !Array.isArray(t[r]) && t[r] && e.set(r, t[r]));
  }), new URLSearchParams(window.location.search).forEach((r, n) => {
    C.includes(n) || e.set(n, r);
  }), window.history.pushState(
    {},
    "",
    `${window.location.pathname}?${e.toString()}`
  );
});
let x = w;
async function ie(a) {
  const s = O(a);
  return a.textContent = "", a.dataset.category = s.category, new Promise((t) => {
    const e = h`<${x}
			...${s}
			block=${a}
			resolve=${t}
		/>`;
    q(e, a);
  });
}
export {
  C as ALLOWED_FILTER_PARAMETERS,
  ie as default,
  Q as productSearchQuery
};
